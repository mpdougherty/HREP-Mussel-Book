<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 6 Calculate Mussel Metrics | HREP Mussel Modeling</title>
  <meta name="description" content="This document describes the process for modeling mussel suitability on Upper Mississippi River Restoration (UMRR) Habitat Rehabilitation and Restoration Projects (HREP).">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 6 Calculate Mussel Metrics | HREP Mussel Modeling" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This document describes the process for modeling mussel suitability on Upper Mississippi River Restoration (UMRR) Habitat Rehabilitation and Restoration Projects (HREP)." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Calculate Mussel Metrics | HREP Mussel Modeling" />
  
  <meta name="twitter:description" content="This document describes the process for modeling mussel suitability on Upper Mississippi River Restoration (UMRR) Habitat Rehabilitation and Restoration Projects (HREP)." />
  

<meta name="author" content="Michael Dougherty, Geographer, US Army Corps of Engineers, Rock Island District">
<meta name="author" content="Davi Michl, Biologist, US Army Corps of Engineers, Rock Island District">
<meta name="author" content="Dan Kelner, Fisheries Biologist, US Army Corps of Engineers, St. Paul District">


<meta name="date" content="2019-05-05">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="mussel-data-processing.html">
<link rel="next" href="explore-mcat-metrics.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">HREP Mussel Modeling</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>0.1</b> Abstract</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#need-for-the-study"><i class="fa fa-check"></i><b>1.1</b> Need for the Study</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#species-distribution-modeling"><i class="fa fa-check"></i><b>1.2</b> Species Distribution Modeling</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#previous-umr-mussel-modeling"><i class="fa fa-check"></i><b>1.3</b> Previous UMR Mussel Modeling</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#workflow"><i class="fa fa-check"></i><b>1.4</b> Workflow</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#mussel-database"><i class="fa fa-check"></i><b>1.5</b> Mussel Database</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#calculate-mcat-metrics"><i class="fa fa-check"></i><b>1.6</b> Calculate MCAT Metrics</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#calculate-background"><i class="fa fa-check"></i><b>1.7</b> Calculate Background</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#prepare-hydraulic-predictors"><i class="fa fa-check"></i><b>1.8</b> Prepare Hydraulic Predictors</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#prepare-wind-wave-predictors"><i class="fa fa-check"></i><b>1.9</b> Prepare Wind-Wave Predictors</a></li>
<li class="chapter" data-level="1.10" data-path="introduction.html"><a href="introduction.html#run-maxent"><i class="fa fa-check"></i><b>1.10</b> Run Maxent</a></li>
<li class="chapter" data-level="1.11" data-path="introduction.html"><a href="introduction.html#evaluate-model"><i class="fa fa-check"></i><b>1.11</b> Evaluate Model</a></li>
<li class="chapter" data-level="1.12" data-path="introduction.html"><a href="introduction.html#repeat-for-each-alternative"><i class="fa fa-check"></i><b>1.12</b> Repeat for Each Alternative</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html"><i class="fa fa-check"></i><b>2</b> Prepare Hydraulic Data</a><ul>
<li class="chapter" data-level="2.1" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html#create-mask"><i class="fa fa-check"></i><b>2.1</b> Create Mask</a></li>
<li class="chapter" data-level="2.2" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html#set-environments"><i class="fa fa-check"></i><b>2.2</b> Set Environments</a></li>
<li class="chapter" data-level="2.3" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html#process-adh-model-outputs"><i class="fa fa-check"></i><b>2.3</b> Process ADH Model Outputs</a></li>
<li class="chapter" data-level="2.4" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html#calculate-slope"><i class="fa fa-check"></i><b>2.4</b> Calculate Slope</a></li>
<li class="chapter" data-level="2.5" data-path="prepare-hydraulic-data.html"><a href="prepare-hydraulic-data.html#convert-to-.bil-format"><i class="fa fa-check"></i><b>2.5</b> Convert to .bil format</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="prepare-wind-and-wave-data.html"><a href="prepare-wind-and-wave-data.html"><i class="fa fa-check"></i><b>3</b> Prepare Wind and Wave Data</a><ul>
<li class="chapter" data-level="3.1" data-path="prepare-wind-and-wave-data.html"><a href="prepare-wind-and-wave-data.html#identify-appropriate-weather-stations"><i class="fa fa-check"></i><b>3.1</b> Identify Appropriate Weather Stations</a></li>
<li class="chapter" data-level="3.2" data-path="prepare-wind-and-wave-data.html"><a href="prepare-wind-and-wave-data.html#obtain-wind-data"><i class="fa fa-check"></i><b>3.2</b> Obtain Wind Data</a></li>
<li class="chapter" data-level="3.3" data-path="prepare-wind-and-wave-data.html"><a href="prepare-wind-and-wave-data.html#determine-period-of-record"><i class="fa fa-check"></i><b>3.3</b> Determine Period of Record</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="create-backgound-data.html"><a href="create-backgound-data.html"><i class="fa fa-check"></i><b>4</b> Create Backgound Data</a><ul>
<li class="chapter" data-level="4.1" data-path="create-backgound-data.html"><a href="create-backgound-data.html#create-background-data"><i class="fa fa-check"></i><b>4.1</b> Create Background Data</a></li>
<li class="chapter" data-level="4.2" data-path="create-backgound-data.html"><a href="create-backgound-data.html#export-to-maxent-swd-format"><i class="fa fa-check"></i><b>4.2</b> Export to Maxent “SWD” Format</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html"><i class="fa fa-check"></i><b>5</b> Mussel Data Processing</a><ul>
<li class="chapter" data-level="5.1" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#identify-mussel-surveys-in-study-area"><i class="fa fa-check"></i><b>5.1</b> Identify Mussel Surveys in Study Area</a></li>
<li class="chapter" data-level="5.2" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#import-sample-locations"><i class="fa fa-check"></i><b>5.2</b> Import Sample Locations</a></li>
<li class="chapter" data-level="5.3" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#import-individual-mussel-records"><i class="fa fa-check"></i><b>5.3</b> Import Individual Mussel Records</a></li>
<li class="chapter" data-level="5.4" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#join-sample-location-to-individual-mussel-records"><i class="fa fa-check"></i><b>5.4</b> Join Sample Location to Individual Mussel Records</a></li>
<li class="chapter" data-level="5.5" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#repeat-for-each-mussel-survey-in-the-study-area"><i class="fa fa-check"></i><b>5.5</b> Repeat for each mussel survey in the study area</a></li>
<li class="chapter" data-level="5.6" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#append-surveys-together-into-a-single-study-area-feature-class"><i class="fa fa-check"></i><b>5.6</b> Append Surveys together into a single Study Area feature class</a></li>
<li class="chapter" data-level="5.7" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#create-a-quantative-table"><i class="fa fa-check"></i><b>5.7</b> Create a quantative table</a></li>
<li class="chapter" data-level="5.8" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#create-mcat-flag-fields"><i class="fa fa-check"></i><b>5.8</b> Create MCAT Flag Fields</a></li>
<li class="chapter" data-level="5.9" data-path="mussel-data-processing.html"><a href="mussel-data-processing.html#create-the-samples-table"><i class="fa fa-check"></i><b>5.9</b> Create the <code>samples</code> table</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html"><i class="fa fa-check"></i><b>6</b> Calculate Mussel Metrics</a><ul>
<li class="chapter" data-level="6.1" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#mcat-metrics"><i class="fa fa-check"></i><b>6.1</b> MCAT Metrics</a></li>
<li class="chapter" data-level="6.2" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-percent-listed"><i class="fa fa-check"></i><b>6.2</b> Create Percent Listed</a></li>
<li class="chapter" data-level="6.3" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-percent-tolerant"><i class="fa fa-check"></i><b>6.3</b> Create Percent Tolerant</a></li>
<li class="chapter" data-level="6.4" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-percent-tribe-lampsilini"><i class="fa fa-check"></i><b>6.4</b> Create Percent Tribe Lampsilini</a></li>
<li class="chapter" data-level="6.5" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-percent-juveniles"><i class="fa fa-check"></i><b>6.5</b> Create Percent Juveniles</a></li>
<li class="chapter" data-level="6.6" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-percent-over-15-years"><i class="fa fa-check"></i><b>6.6</b> Create Percent Over 15 Years</a></li>
<li class="chapter" data-level="6.7" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-abundance"><i class="fa fa-check"></i><b>6.7</b> Create Abundance</a></li>
<li class="chapter" data-level="6.8" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-species-evenness"><i class="fa fa-check"></i><b>6.8</b> Create Species Evenness</a></li>
<li class="chapter" data-level="6.9" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-tribe-eveness"><i class="fa fa-check"></i><b>6.9</b> Create Tribe Eveness</a></li>
<li class="chapter" data-level="6.10" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#create-es-100"><i class="fa fa-check"></i><b>6.10</b> Create ES 100</a></li>
<li class="chapter" data-level="6.11" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#mcat-metric-site-level-thresholds"><i class="fa fa-check"></i><b>6.11</b> MCAT Metric Site Level Thresholds</a></li>
<li class="chapter" data-level="6.12" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#calculate-mcat-site-score"><i class="fa fa-check"></i><b>6.12</b> Calculate MCAT Site Score</a></li>
<li class="chapter" data-level="6.13" data-path="calculate-mussel-metrics.html"><a href="calculate-mussel-metrics.html#export-to-maxent-swd-format-1"><i class="fa fa-check"></i><b>6.13</b> Export to Maxent “SWD” format</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html"><i class="fa fa-check"></i><b>7</b> Explore MCAT Metrics</a><ul>
<li class="chapter" data-level="7.1" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-metric-site-threshold"><i class="fa fa-check"></i><b>7.1</b> MCAT Metric Site Threshold</a><ul>
<li class="chapter" data-level="7.1.1" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#percent-listed"><i class="fa fa-check"></i><b>7.1.1</b> Percent Listed</a></li>
<li class="chapter" data-level="7.1.2" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#percent-tolerant"><i class="fa fa-check"></i><b>7.1.2</b> Percent Tolerant</a></li>
<li class="chapter" data-level="7.1.3" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#percent-tribe-lampsilini"><i class="fa fa-check"></i><b>7.1.3</b> Percent Tribe Lampsilini</a></li>
<li class="chapter" data-level="7.1.4" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#percent-juveniles"><i class="fa fa-check"></i><b>7.1.4</b> Percent Juveniles</a></li>
<li class="chapter" data-level="7.1.5" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#percent-over-15-years"><i class="fa fa-check"></i><b>7.1.5</b> Percent over 15 years</a></li>
<li class="chapter" data-level="7.1.6" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#abundance"><i class="fa fa-check"></i><b>7.1.6</b> Abundance</a></li>
<li class="chapter" data-level="7.1.7" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#species-evenness"><i class="fa fa-check"></i><b>7.1.7</b> Species Evenness</a></li>
<li class="chapter" data-level="7.1.8" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#tribe-evenness"><i class="fa fa-check"></i><b>7.1.8</b> Tribe Evenness</a></li>
<li class="chapter" data-level="7.1.9" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#es_100"><i class="fa fa-check"></i><b>7.1.9</b> ES_100</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-scores"><i class="fa fa-check"></i><b>7.2</b> MCAT Site Scores</a></li>
<li class="chapter" data-level="7.3" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-velocity"><i class="fa fa-check"></i><b>7.3</b> MCAT Site Score by Velocity</a></li>
<li class="chapter" data-level="7.4" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-shear-stress"><i class="fa fa-check"></i><b>7.4</b> MCAT Site Score by Shear Stress</a></li>
<li class="chapter" data-level="7.5" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-reynolds-number"><i class="fa fa-check"></i><b>7.5</b> MCAT Site Score by Reynolds Number</a></li>
<li class="chapter" data-level="7.6" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-froude-number"><i class="fa fa-check"></i><b>7.6</b> MCAT Site Score by Froude Number</a></li>
<li class="chapter" data-level="7.7" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-depth"><i class="fa fa-check"></i><b>7.7</b> MCAT Site Score by Depth</a></li>
<li class="chapter" data-level="7.8" data-path="explore-mcat-metrics.html"><a href="explore-mcat-metrics.html#mcat-site-score-by-slope"><i class="fa fa-check"></i><b>7.8</b> MCAT Site Score by Slope</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html"><i class="fa fa-check"></i><b>8</b> Develop Maxent Mussel Model</a><ul>
<li class="chapter" data-level="8.1" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html#download-the-maxent-software"><i class="fa fa-check"></i><b>8.1</b> Download the Maxent Software</a></li>
<li class="chapter" data-level="8.2" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html#convert-predictors-from-.bil-to-.mxe-format"><i class="fa fa-check"></i><b>8.2</b> Convert predictors from <code>.bil</code> to <code>.mxe</code> format</a></li>
<li class="chapter" data-level="8.3" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html#run-maxent-1"><i class="fa fa-check"></i><b>8.3</b> Run Maxent</a></li>
<li class="chapter" data-level="8.4" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html#convert-model-output-from-.mxe-back-to-bil-format"><i class="fa fa-check"></i><b>8.4</b> Convert model output from <code>.mxe</code> back to <code>bil</code> format</a></li>
<li class="chapter" data-level="8.5" data-path="develop-maxent-mussel-model.html"><a href="develop-maxent-mussel-model.html#maxent-speed-issues"><i class="fa fa-check"></i><b>8.5</b> Maxent speed Issues</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="evaulate-model.html"><a href="evaulate-model.html"><i class="fa fa-check"></i><b>9</b> Evaulate Model</a><ul>
<li class="chapter" data-level="9.1" data-path="evaulate-model.html"><a href="evaulate-model.html#goodness-of-fit"><i class="fa fa-check"></i><b>9.1</b> Goodness of Fit</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="evaluate-alternatives.html"><a href="evaluate-alternatives.html"><i class="fa fa-check"></i><b>10</b> Evaluate Alternatives</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HREP Mussel Modeling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="calculate-mussel-metrics" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Calculate Mussel Metrics</h1>
<p>This chapter will describe how to calculate metrics of habitat quality for each sampled site. Each of these metrics will be used as presence data as input to create a set of Maxent habitat suitability models. The metrics calculated in this section were taken from the <a href="https://acwi.gov/monitoring/conference/2014/2ConcurrentSessions/J2/J2Dunn.pdf">Upper Mississippi River Mussel Community Assessment Tool (MCAT)</a> <span class="citation">(Dunn, Zigler, and Newton <a href="#ref-dunn2016">2016</a>)</span>.</p>
<div class="figure"><span id="fig:unnamed-chunk-9"></span>
<img src="docs/images/workflow_MCAT_metrics.png" alt="HREP Mussel Modeling Workflow, Calculate MCAT Metrics Step." width="758" />
<p class="caption">
Figure 6.1: HREP Mussel Modeling Workflow, Calculate MCAT Metrics Step.
</p>
</div>
<div id="mcat-metrics" class="section level2">
<h2><span class="header-section-number">6.1</span> MCAT Metrics</h2>
<p>The purpose of this step is to describe the MCAT metrics used in this study. The following MCAT metrics were selected for inclusion in the model:</p>
<ul>
<li><code>percent listed species</code> - Percent of listed threatened or endangered species (federal or bordering states) is a measure of sensitive species.</li>
<li><code>percent tolerant</code> - Percent of tolerant species (Amblema plicata, Quadrula quadrula, and Obliquaria reflexa) is a measure of a highly disturbed mussel assemblage (i.e., dominated by species tolerant of unstable substrates, silt accumulation, low current velocities, and fluctuating flow conditions).</li>
<li><code>percent tribe Lampsilini</code> - Percent of assemblage that falls within tribe Lampsilini is a measure of species composition, life history, and behavioral characteristics.</li>
<li><code>percent juveniles</code> - Percent of mussels &lt;= 5 years-old is a measure of recruitment into an assemblage over the past five years.</li>
<li><code>percent &gt;= 15 yrs</code> - Percent of mussels &gt;= 15 years-old is a measure of age distribution in an assemblage.</li>
<li><code>abundance</code> - A measure of abundance calculated as the density (no./<span class="math inline">\(m^2\)</span>).</li>
<li><code>species evenness</code> - Species evenness represents the dominance of an assemblage by a few species using Pielou’s evenness index (range 0 to 1).</li>
<li><code>tribe evenness</code> - Tribe evenness represents the dominance of a particular taxonomic group using Pielou’s evenness index (range 0 to 1).</li>
<li><code>ES_100</code> - The expected number of species with a sample size of 100 estimated by rarefaction is a measure of a healthy mussel assemblage.</li>
</ul>
</div>
<div id="create-percent-listed" class="section level2">
<h2><span class="header-section-number">6.2</span> Create Percent Listed</h2>
<p>The purpose of this step is to calculate the percent listed MCAT metric for each sampled site.</p>
<ul>
<li>Determine which mussels in the <code>Cordova_all_individuals</code> feature class are listed and set the flag field. Use the list below to select each of the following species and set the flag <code>Listed</code> field equal to one.</li>
</ul>
<p><strong>UMR Listed Species</strong></p>
<ul>
<li><em>Cumberlandia monodonta</em></li>
<li><em>Elliptio crassidens</em></li>
<li><em>Elliptio dilatata</em></li>
<li><em>Ellipsaria lineolata</em></li>
<li><em>Fusconia ebena</em></li>
<li><em>Lampsilis higginsii</em></li>
<li><em>Lampsilis teres teres</em></li>
<li><em>Lampsilis teres anodontoides</em></li>
<li><em>Ligumia recta</em></li>
<li><em>Plethobasus cyphyus</em></li>
<li><em>Potamilus capax</em></li>
<li><p><em>Simpsonaias ambigua</em></p></li>
<li>Create a definition query on the <code>Cordova_all_individuals</code> feature class where <code>Listed</code> = 1.</li>
<li>Dissolve the <code>Cordova_all_individuals</code> feature class by <code>SAMPLE_ID</code> and <code>ENAME</code> (Scientific name). Add <code>SUM_NumberLive</code> and <code>SUM_Listed</code> fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it <code>PercentListed</code>.</li>
<li>Open the <code>PercentListed</code> attribute table. Add a field titled <code>Perc_listed</code> Type = double.</li>
<li><p>Use the Field Calculator tool to calculate the percent of individual listed species per sampled quadrat using the expression <code>([SUM_Listed] / [SUM_NumberLive]) * 100</code>.</p></li>
</ul>
</div>
<div id="create-percent-tolerant" class="section level2">
<h2><span class="header-section-number">6.3</span> Create Percent Tolerant</h2>
<p>The purpose of this step is to calculate the percent tolerant MCAT metric for each sampled site.</p>
<ul>
<li>Determine which mussels in the <code>Cordova_all_individuals</code> feature class are considered tolerant and set the flag field. Use the list below to select each of the following species and set the flag <code>Tolerant</code> field equal to one.</li>
</ul>
<p><strong>Tolerant Species</strong></p>
<ul>
<li><em>Amblema plicata</em></li>
<li><em>Obliquaria reflexa</em></li>
<li><p><em>Quadrula quadrula</em></p></li>
<li>Create a definition query on the <code>Cordova_all_individuals</code> feature class where <code>Tolerant</code> = 1.</li>
<li>Dissolve the <code>Cordova_all_individuals</code> feature class by <code>SAMPLE_ID</code> and <code>ENAME</code> (Scientific name). Add <code>SUM_NumberLive</code> and <code>SUM_Tolerant</code> fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it <code>PercentTolerant</code>.</li>
<li>Open the <code>PercentTolerant</code> attribute table. Add a field titled <code>Perc_tolerant</code> Type = double.</li>
<li><p>Use the Field Calculator tool to calcualte the percent of individual tolerant species per sampled quadrat using the expression <code>([SUM_Tolerant] / [SUM_NumberLive]) * 100</code>.</p></li>
</ul>
</div>
<div id="create-percent-tribe-lampsilini" class="section level2">
<h2><span class="header-section-number">6.4</span> Create Percent Tribe Lampsilini</h2>
<p>The purpose of this step is to calculate the percent tribe Lampsilini MCAT metric for each sampled site.</p>
<ul>
<li>Determine which mussels in the <code>Cordova_all_individuals</code> feature class are in the Lampsilini tribe and set the flag field. Use the list below to select each of the following species and set the flag <code>Lampsilini</code> field equal to one.</li>
</ul>
<p><strong>Lampsilini Tribe</strong></p>
<ul>
<li><em>Actinonaias ligamentina</em></li>
<li><em>Ellipsaria lineolata</em></li>
<li><em>Lampsilis cardium</em></li>
<li><em>Lampsilis higginsii</em></li>
<li><em>Lampsilis teres (teres)</em></li>
<li><em>Leptodea fragilis</em></li>
<li><em>Ligumia recta</em></li>
<li><em>Obliquaria reflexa</em></li>
<li><em>Obovaria olivaria</em></li>
<li><em>Potamilus alatus</em></li>
<li><em>Potamilus capax</em></li>
<li><em>Potamilus ohiensis</em></li>
<li><em>Toxolasma parvum</em></li>
<li><em>Truncilla donaciformis</em></li>
<li><p><em>Truncilla truncata</em></p></li>
<li>Create a definition query on the <code>Cordova_all_individuals</code> feature class where <code>Lampsilini</code> = 1.</li>
<li>Dissolve the <code>Cordova_all_individuals</code> feature class by <code>SAMPLE_ID</code> and <code>ENAME</code> (Scientific name). Add <code>SUM_NumberLive</code> and <code>SUM_Tolerant</code> fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it <code>PercentLampsilini</code>.</li>
<li>Open the <code>PercentLampsilini</code> attribute table. Add a field titled <code>perc_lampsilini</code> Type = double.</li>
<li><p>Use the Field Calculator tool to calcualte the percent of individual tolerant species per sampled quadrat using the expression <code>([SUM_Tolerant] / [SUM_NumberLive]) * 100</code>.</p></li>
</ul>
</div>
<div id="create-percent-juveniles" class="section level2">
<h2><span class="header-section-number">6.5</span> Create Percent Juveniles</h2>
<p>The purpose of this step is to calculate the percent juveniles MCAT metric for each sampled site.</p>
</div>
<div id="create-percent-over-15-years" class="section level2">
<h2><span class="header-section-number">6.6</span> Create Percent Over 15 Years</h2>
<p>The purpose of this step is to calculate the percent over 15 years old MCAT metric for each sampled site.</p>
</div>
<div id="create-abundance" class="section level2">
<h2><span class="header-section-number">6.7</span> Create Abundance</h2>
<p>The purpose of this step is to calculate the Abundance MCAT metric for each sampled site.</p>
<ul>
<li>For the abundance metric, dissolve <code>Cordova_all_individuals</code> by <code>SAMPLE_ID</code> and <code>ENAME</code> (Scientific name). Add ‘SUM_NumberLive’ field in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it <code>Abundance</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Import Abundance from geodatabase</span>
abundance_sp &lt;-<span class="st"> </span><span class="kw">arc2sp</span>(<span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Abundance&quot;</span>)

<span class="co"># Convert sp object to a data frame</span>
abundance &lt;-<span class="st"> </span>abundance_sp<span class="op">@</span>data

<span class="co"># Remove OBJECTID field</span>
abundance &lt;-<span class="st"> </span>abundance[,<span class="op">-</span><span class="dv">1</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convert from num. of mussels per 0.25 sq m to num. per 1.0 square m</span>
abundance<span class="op">$</span>num_sq_m &lt;-<span class="st"> </span>abundance<span class="op">$</span>SUM_NumberLive <span class="op">*</span><span class="st"> </span><span class="dv">4</span>

<span class="co"># Calculate the quantiles</span>
q &lt;-<span class="st"> </span><span class="kw">quantile</span>(abundance<span class="op">$</span>num_sq_m)
q</code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
##    4    4    8   20  180</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge the abundance scores back onto the sp object</span>
sample_abundance &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">merge</span>(<span class="dt">x =</span> abundance_sp,
                              <span class="dt">y =</span> abundance,
                              <span class="dt">by.x =</span> <span class="st">&quot;SampleID&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;SampleID&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Export to geodatabase</span>
<span class="kw">sp2arc</span>(sample_abundance, <span class="dt">fc_path =</span> <span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_abundance&quot;</span>)</code></pre></div>
</div>
<div id="create-species-evenness" class="section level2">
<h2><span class="header-section-number">6.8</span> Create Species Evenness</h2>
<p>The purpose of this step is to calculate the Pielou’s evenness index (range 0-1), estimated at the species level for each sampled site.</p>
<ul>
<li>Create a table of SampleID by species by abundance (number live). Use the <code>Dissolve</code> tool:
<ul>
<li>Input Features: <code>Cordova_all_individuals</code></li>
<li>Output feature class: <code>Cordova_sampleid_species</code></li>
<li>Dissolve Fields: <code>SampleID</code>, <code>EName</code></li>
<li>Statistics Fields: <code>NumberLive</code>, SUM</li>
<li>Create Multipart: unchecked</li>
</ul></li>
</ul>
<p>Ensure that the <code>Cordova_sampleid_species</code> feature class is of type <code>Point Features</code> and not <code>Multipoint Features</code>. If multipoint, then use the <code>Multipart to Singlepart</code> tool to convert from multipoint to point feature type.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Import ArcGIS feature class into R</span>
cordova_sampleid_species &lt;-<span class="st"> </span><span class="kw">arc2sp</span>(<span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Cordova_sampleid_species&quot;</span>)

<span class="co"># Convert sp object to a data frame</span>
sample_species &lt;-<span class="st"> </span>cordova_sampleid_species<span class="op">@</span>data

<span class="co"># Remove OBJECTID field</span>
sample_species &lt;-<span class="st"> </span>sample_species[,<span class="op">-</span><span class="dv">1</span>]

<span class="co"># Convert to vegan community data matrix-like format using labdsv::matrify</span>
sample_species_matrix &lt;-<span class="st"> </span>labdsv<span class="op">::</span><span class="kw">matrify</span>(sample_species)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate the Shannon-Weaver diversity index</span>
shannon_diversity &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">diversity</span>(sample_species_matrix, <span class="dt">index =</span> <span class="st">&quot;shannon&quot;</span>)

<span class="co"># Calculate the number species per site (see ?vegan::diversity)</span>
species_number &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">specnumber</span>(sample_species_matrix)

<span class="co"># Use the following equation to calculate Pielou&#39;s evenness</span>
<span class="co"># See the vegan Diversity Vignette for details</span>
pielou_evenness &lt;-<span class="st"> </span>shannon_diversity<span class="op">/</span><span class="kw">log</span>(species_number)

<span class="co"># Set NaN pielou_evenness values to zero</span>
pielou_evenness &lt;-<span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">is.nan</span>(pielou_evenness), <span class="dv">0</span>, pielou_evenness)
<span class="co"># Create a data frame of results</span>
pielou &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sampleid =</span> <span class="kw">names</span>(pielou_evenness), 
                     shannon_diversity, 
                     species_number, 
                     pielou_evenness)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge the Pielou scores back onto the sp object</span>
sample_species_pielou &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">merge</span>(<span class="dt">x =</span> cordova_sampleid_species,
                                   <span class="dt">y =</span> pielou,
                                   <span class="dt">by.x =</span> <span class="st">&quot;SampleID&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;sampleid&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Export to geodatabase</span>
<span class="kw">sp2arc</span>(sample_species_pielou, <span class="dt">fc_path =</span> <span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_species_pielou&quot;</span>)</code></pre></div>
<ul>
<li>Create a table of SampleID by species Pielou evenness score. Use the <code>Dissolve</code> tool:
<ul>
<li>Input Features: <code>sample_species_pielou</code></li>
<li>Output feature class: <code>species_pielou</code></li>
<li>Dissolve Fields: <code>SampleID</code></li>
<li>Statistics Fields: <code>shannon_diversity</code>, MEAN <code>species_number</code>, MEAN <code>pielou_evenness</code>, MEAN</li>
<li>Create Multipart: unchecked</li>
</ul></li>
</ul>
</div>
<div id="create-tribe-eveness" class="section level2">
<h2><span class="header-section-number">6.9</span> Create Tribe Eveness</h2>
<p>The purpose of this step is to calculate the Pielou’s evenness index (range 0-1), estimated at the tribe level. (will probably need to add a new column for tribe; dissolve on this with sample ID)</p>
<ul>
<li>In the feature class <code>Cordova_all_individuals</code>, create a new text variable named <code>tribe</code>.</li>
<li>Use the <code>Field Calculator</code> tool on the <code>tribe</code> field to calculate its value using the following Python expression: <code>!Ename!.split()[0]</code></li>
<li>Create a table of SampleID by tribe by abundance (number live). Use the <code>Dissolve</code> tool:
<ul>
<li>Input Features: <code>Cordova_all_individuals</code></li>
<li>Output feature class: <code>Cordova_sampleid_tribe</code></li>
<li>Dissolve Fields: <code>SampleID</code>, <code>tribe</code></li>
<li>Statistics Fields: <code>NumberLive</code>, SUM</li>
<li>Create Multipart: unchecked</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Import ArcGIS feature class into R</span>
cordova_sampleid_tribe &lt;-<span class="st"> </span><span class="kw">arc2sp</span>(<span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Cordova_sampleid_tribe&quot;</span>)

<span class="co"># Convert sp object to a data frame</span>
sample_tribe &lt;-<span class="st"> </span>cordova_sampleid_tribe<span class="op">@</span>data

<span class="co"># Remove OBJECTID field</span>
sample_tribe &lt;-<span class="st"> </span>sample_tribe[,<span class="op">-</span><span class="dv">1</span>]

<span class="co"># Convert to vegan community data matrix-like format using labdsv::matrify</span>
sample_tribe_matrix &lt;-<span class="st"> </span>labdsv<span class="op">::</span><span class="kw">matrify</span>(sample_tribe)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate the Shannon-Weaver diversity index</span>
tribe_shannon_diversity &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">diversity</span>(sample_tribe_matrix, <span class="dt">index =</span> <span class="st">&quot;shannon&quot;</span>)

<span class="co"># Calculate the number species per site (see ?vegan::diversity)</span>
tribe_number &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">specnumber</span>(sample_tribe_matrix)

<span class="co"># Use the following equation to calculate Pielou&#39;s evenness</span>
<span class="co"># See the vegan Diversity Vignette for details</span>
tribe_pielou_evenness &lt;-<span class="st"> </span>tribe_shannon_diversity<span class="op">/</span><span class="kw">log</span>(tribe_number)

<span class="co"># Set NaN pielou_evenness values to zero</span>
tribe_pielou_evenness &lt;-<span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">is.nan</span>(tribe_pielou_evenness), <span class="dv">0</span>, 
                                tribe_pielou_evenness)
<span class="co"># Create a data frame of results</span>
tribe_pielou &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sampleid =</span> <span class="kw">names</span>(tribe_pielou_evenness), 
                           tribe_shannon_diversity, 
                           tribe_number, 
                           tribe_pielou_evenness)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge the Pielou scores back onto the sp object</span>
sample_tribe_pielou &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">merge</span>(<span class="dt">x =</span> cordova_sampleid_tribe,
                                 <span class="dt">y =</span> tribe_pielou,
                                 <span class="dt">by.x =</span> <span class="st">&quot;SampleID&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;sampleid&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Export to geodatabase</span>
<span class="kw">sp2arc</span>(sample_tribe_pielou, <span class="dt">fc_path =</span> <span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_tribe_pielou&quot;</span>)</code></pre></div>
<ul>
<li>Create a table of SampleID by tribe Pielou evenness score. Use the <code>Dissolve</code> tool:
<ul>
<li>Input Features: <code>sample_tribe_pielou</code></li>
<li>Output feature class: <code>tribe_pielou</code></li>
<li>Dissolve Fields: <code>SampleID</code></li>
<li>Statistics Fields: <code>tribe_shannon_diversity</code>, MEAN <code>tribe_number</code>, MEAN <code>tribe_pielou_evenness</code>, MEAN</li>
<li>Create Multipart: unchecked</li>
</ul></li>
</ul>
</div>
<div id="create-es-100" class="section level2">
<h2><span class="header-section-number">6.10</span> Create ES 100</h2>
<p>The purpose of this step is to calculate the ES 100 MCAT metric for each sampled site. ES_100 is the expected number of species with a sample size of 100 estimated by rarefaction based on random resampling of the data <span class="citation">(Dunn, Zigler, and Newton <a href="#ref-dunn2016">2016</a>)</span>.</p>
<p>ES_100-species richness estimated by rarefaction; caveat: sites need to be compared based on an equal sample size because # of species and # of individuals sampled are large correlated. Not sure how best to approach this one; I defer to you!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Uses the sample_species_matrix calculated from the species evenness section</span>

<span class="co"># Calculate rarefaction using a sample size of 100</span>
rarefy_es_<span class="dv">100</span> &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">rarefy</span>(<span class="dt">x =</span> sample_species_matrix, 
                               <span class="dt">sample =</span> <span class="dv">100</span>)</code></pre></div>
<pre><code>## Warning in vegan::rarefy(x = sample_species_matrix, sample = 100):
## requested &#39;sample&#39; was larger than smallest site maximum (0)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate rarefaction using a reasonable sample size</span>
rarefy_rowmedian &lt;-<span class="st"> </span>vegan<span class="op">::</span><span class="kw">rarefy</span>(<span class="dt">x =</span> sample_species_matrix,
                                  <span class="dt">sample =</span> <span class="kw">median</span>(<span class="kw">rowSums</span>(sample_species_matrix)))</code></pre></div>
<pre><code>## Warning in vegan::rarefy(x = sample_species_matrix, sample =
## median(rowSums(sample_species_matrix))): requested &#39;sample&#39; was larger than
## smallest site maximum (0)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a data frame of results</span>
rarefy_species &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sampleid =</span> <span class="kw">names</span>(rarefy_es_<span class="dv">100</span>), 
                             rarefy_es_<span class="dv">100</span>,
                             rarefy_rowmedian,
                             <span class="dt">shannon =</span> <span class="kw">diversity</span>(sample_species_matrix),
                             <span class="dt">specnumber =</span> <span class="kw">specnumber</span>(sample_species_matrix))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge the rarefaction scores back onto the sp object</span>
rarefy_sampleid_species &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">merge</span>(<span class="dt">x =</span> cordova_sampleid_species,
                                     <span class="dt">y =</span> rarefy_species,
                                     <span class="dt">by.x =</span> <span class="st">&quot;SampleID&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;sampleid&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Export to geodatabase</span>
<span class="kw">sp2arc</span>(rarefy_sampleid_species, <span class="dt">fc_path =</span> <span class="st">&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/rarefy_sampleid_species&quot;</span>)</code></pre></div>
<ul>
<li>Create a table of SampleID by tribe Pielou evenness score. Use the <code>Dissolve</code> tool:
<ul>
<li>Input Features: <code>rarefy_sampleid_species</code></li>
<li>Output feature class: <code>rarefy_samples</code></li>
<li>Dissolve Fields: <code>SampleID</code></li>
<li>Statistics Fields: <code>SUM_NumberLive</code>, MEAN <code>rarefy_es_100</code>, MEAN <code>rarefy_rowmedian</code>, MEAN <code>shannon</code>, MEAN <code>specnumber</code>, MEAN</li>
<li>Create Multipart: unchecked</li>
</ul></li>
</ul>
</div>
<div id="mcat-metric-site-level-thresholds" class="section level2">
<h2><span class="header-section-number">6.11</span> MCAT Metric Site Level Thresholds</h2>
<p>The descriptive statistics presented in the previous section were used to select MCAT metrics thresolds.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:fig">Table 6.1: </span>Translating MCAT Metric Thresholds from the Bed to the Site Scale.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Bed Scale
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Site Scale
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Metrics
</th>
<th style="text-align:left;">
Poor
</th>
<th style="text-align:left;">
Fair
</th>
<th style="text-align:left;">
Good
</th>
<th style="text-align:left;">
Site Threshold
</th>
<th style="text-align:right;">
No. of Sites
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
% listed
</td>
<td style="text-align:left;">
&lt;0.6
</td>
<td style="text-align:left;">
0.6-3.6
</td>
<td style="text-align:left;">
&gt;3.6
</td>
<td style="text-align:left;">
&gt;3
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
% tolerant
</td>
<td style="text-align:left;">
&gt;62.7
</td>
<td style="text-align:left;">
38.3-62.7
</td>
<td style="text-align:left;">
&lt;38.3
</td>
<td style="text-align:left;">
&lt;40
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
% lampsilini
</td>
<td style="text-align:left;">
&lt;17.2 or &gt;56.4
</td>
<td style="text-align:left;">
&lt;17.2-34.7 or &gt;39.5-56.4
</td>
<td style="text-align:left;">
&gt;34.7-39.5
</td>
<td style="text-align:left;">
&gt;40
</td>
<td style="text-align:right;">
93
</td>
</tr>
<tr>
<td style="text-align:left;">
% juveniles
</td>
<td style="text-align:left;">
&lt;19.8
</td>
<td style="text-align:left;">
&lt;19.8-49.3
</td>
<td style="text-align:left;">
&gt;49.3
</td>
<td style="text-align:left;">
&gt;50
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
% &gt;= 15 years
</td>
<td style="text-align:left;">
&lt;0.8 or &gt;16.0
</td>
<td style="text-align:left;">
&gt;5.6-16.0
</td>
<td style="text-align:left;">
&gt;2.4-5.6
</td>
<td style="text-align:left;">
&gt;5*
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
abundance
</td>
<td style="text-align:left;">
&lt;8
</td>
<td style="text-align:left;">
8-13
</td>
<td style="text-align:left;">
&gt;13
</td>
<td style="text-align:left;">
&gt;13
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
species evenness
</td>
<td style="text-align:left;">
&lt;0.665
</td>
<td style="text-align:left;">
0.665-0.780
</td>
<td style="text-align:left;">
&gt;0.780
</td>
<td style="text-align:left;">
&gt;0.7
</td>
<td style="text-align:right;">
98
</td>
</tr>
<tr>
<td style="text-align:left;">
tribe evenness
</td>
<td style="text-align:left;">
&lt;0.719
</td>
<td style="text-align:left;">
0.719-0.823
</td>
<td style="text-align:left;">
&gt;0.823
</td>
<td style="text-align:left;">
&gt;0.8
</td>
<td style="text-align:right;">
86
</td>
</tr>
<tr>
<td style="text-align:left;">
ES 100
</td>
<td style="text-align:left;">
&lt;11.5
</td>
<td style="text-align:left;">
11.5-15.7
</td>
<td style="text-align:left;">
&gt;15.7
</td>
<td style="text-align:left;">
&gt;3*
</td>
<td style="text-align:right;">
49
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border: 0;" colspan="100%">
<sup>*</sup> The site threshold for this metric is lower than the bed threshold due to the lower number of individuals of each species found at each sampled site.
</td>
</tr>
</tfoot>
</table>
</div>
<div id="calculate-mcat-site-score" class="section level2">
<h2><span class="header-section-number">6.12</span> Calculate MCAT Site Score</h2>
<p>The purpose of this section is to calculate an MCAT Site score. This score is composed of the number of MCAT metrics met for each site. A site that meets none of the MCAT metrics receives a score of zero while a site that meets all of the scores receives a score of nine.</p>
<div class="figure"><span id="fig:unnamed-chunk-31"></span>
<img src="HREP_Mussel_Modeling_files/figure-html/unnamed-chunk-31-1.png" alt="Frequency of MCAT Site Scores. " width="624" />
<p class="caption">
Figure 6.2: Frequency of MCAT Site Scores.
</p>
</div>
</div>
<div id="export-to-maxent-swd-format-1" class="section level2">
<h2><span class="header-section-number">6.13</span> Export to Maxent “SWD” format</h2>
<p>The purpose of this step is to assign the ADH predictor variables (and optionally the wind/wave variables) to each MCAT metric. The Maxent documentation refers to this format as the “Samples With Data” (SWD) format because it contains the samples (i.e., sample identifier, latitude, longitude) with the environmental predictor variables (e.g., q5_velocity, q5_depth, q5_slope, etc.).</p>
<ul>
<li>Add 3 fields titled ‘species’ Type=string and Length=20; ‘longitude’ Type=double; and ‘latitude’ Type=double; in that order.</li>
<li><p>Use field calculator to populate the field with species=“perc_listed”. Use Calculate Geometry to populate the ‘longitude’ and ‘latitude’ fields, ensuring that the coordinate system is set to ‘NAD 1983 2011 US Feet’ and ‘StatePlane Illinois West FIPS 1202’ and the units are set to US feet.</p></li>
<li><p>Use Extract Multi Values to Points (spatial analyst) tool to write new values (velocity, depth, slope, and ss) onto each MCAT metric feature class and <code>background</code>.</p>
<ul>
<li>Input point features: <code>//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/PercentListed</code></li>
<li>Input rasters: velocity, depth, slope, and ss (use rasters in the <code>Adh.gdb</code>, not .bil) copy unionidae_swd and delete 3 variable fields.</li>
<li>Repeat this process for <code>PercentTolerant</code>, <code>PercentLampsilini</code>, <code>PercentJuvenile</code>, <code>PercentOver15yrs</code>, <code>Abundance</code>, <code>species_pielou</code>, <code>tribe_pielou</code>, <code>rarefy_samples</code>, and <code>background</code>.</li>
</ul></li>
<li>Ensure all layers have same spatial reference before running the tool.<br />
</li>
<li><p>Export <code>background</code> and each mussel MCAT metric as .csv files. Ensure ObjectID field is deleted in Excel prior to upload in Maxent.</p></li>
</ul>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-dunn2016">
<p>Dunn, Heidi, Steve Zigler, and Teresa Newton. 2016. “Validation of a Mussel Community Assessment Tool for the Upper Mississippi River System.” 2014 MCA2. Rock Island, IL: U.S. Army Corps of Engineers, Rock Island District.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mussel-data-processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="explore-mcat-metrics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["HREP Mussel Modeling.pdf", "HREP Mussel Modeling.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
