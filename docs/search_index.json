[
["index.html", "HREP Mussel Modeling Modeling Mussel Habitat Suitability for Upper Mississippi River Restoration Projects Preface 0.1 Abstract 0.2 How to Read this Technical Report 0.3 Tutorial Data", " HREP Mussel Modeling Modeling Mussel Habitat Suitability for Upper Mississippi River Restoration Projects Michael Dougherty, Geographer, US Army Corps of Engineers, Rock Island District Davi Michl, Biologist, US Army Corps of Engineers, Rock Island District Dan Kelner, Fisheries Biologist, US Army Corps of Engineers, St. Paul District 2019-05-13 Preface This project has been funded by the US Army Corps of Engineers (USACE) Upper Mississippi River Restoration Program (UMRR). 0.1 Abstract This technical report describes a method for modeling mussel habitat suitability at the site scale for Upper Mississippi River Restoration Program (UMRR) Habitat Restoration and Enhancement Projects (HREP). This approach was designed to take advantage of UMRR Partnership organizations’ previous investments in mussel surveys, wind and wave modeling methodology, and hydraulic modeling. This approach is currently under development and being being evaluated while being applied to several current HREPs. The validity and usefulness of this approach is being evaluated through the standard USACE project review process. The Steamboat Island HREP is used in this technical report as a learning example to walk a user through the detailed process to reproduce this analysis for another project. 0.2 How to Read this Technical Report The purpose of this technical report is to document the process used to model mussels on UMRR HREPs. This report will be of interest to at least three groups of individuals: Model Reviewers - This technical report will serve as technical documentation for reviewers charged with evaluating this approach. Feasibility Project Delivery Team (PDT) members - This group will want to read chapter 1. Introduction to gain an overview of the process and then digest later chapters, 9. Evaluate Model, 10. Evaluate Alternatives, etc. Analysts - This group will need to pay particular attention to chapters 2 through 10 to be able to follow the detailed instruction required to run the model. 0.3 Tutorial Data To help analysts learn how to reproduce this analysis, the approach described in this technical report is structured as a tutorial, complete with tutorial data available for download. "],
["introduction.html", "Chapter 1 Introduction 1.1 Need for the Study 1.2 Species Distribution Modeling 1.3 Previous UMR Mussel Modeling 1.4 Workflow 1.5 Mussel Database 1.6 Calculate MCAT Metrics 1.7 Calculate Background 1.8 Prepare Hydraulic Predictors 1.9 Prepare Wind-Wave Predictors 1.10 Run Maxent 1.11 Evaluate Model 1.12 Repeat for Each Alternative", " Chapter 1 Introduction 1.1 Need for the Study Mussels are important UMR biotic communities! Few methods exist for evaluating mussel habitat suitability for UMRR HREPs Spatially explicit models are helpful to evaluate spatial variation of habitat suitability across projects Evaluate impact of project features on existing mussel communities Evaluate likelihood that project features will create suitable habitat for mussels 1.2 Species Distribution Modeling Species Distribution Modeling (SDM) has become a common method for mapping suitable habitats for many species or taxa groups (Elith, Leathwick, and Hastie 2008, Elith and Leathwick (2009)). The dismo R package has been created to support SDM in R (see the dismo package vignette sdm, Hijmans and Elith 2013). Another good overview of SDM in R (Hijmans and Elith, n.d.). Presence Data (dependent variables) Take advantage of existing UMR mussel data Predictor Variables (independent variables) Many HREPs invest in 2D hydraulic models. Let’s use them! Mapping substrate is expensive Hydraulic only mussel models explain ~%60 of variation Is that good enough to make better informed HREP planning decisions? 1.3 Previous UMR Mussel Modeling UMESC Pool 8 mussel model UMESC Pool 18 mussel model 1.4 Workflow Figure 1.1: HREP Mussel Modeling Workflow. 1.5 Mussel Database The USACE Mussel Database HREP pre-project survey 2018 Steamboat survey 2014 Cordova survey 2010 Cordova survey 1.6 Calculate MCAT Metrics 1.7 Calculate Background 1.8 Prepare Hydraulic Predictors 1.9 Prepare Wind-Wave Predictors 1.10 Run Maxent 1.11 Evaluate Model 1.12 Repeat for Each Alternative References "],
["setup.html", "Chapter 2 Setup 2.1 Download the Maxent Software 2.2 Install R and RStudio 2.3 Install ArcGIS Desktop or ArcGIS Pro 2.4 Install Tutorial Data", " Chapter 2 Setup This chapter will describe the steps required to setup your computer to perform this analysis. 2.1 Download the Maxent Software The purpose of this section is to describe the process for downloading and configuring the Maxent software (Phillips et al. 2017). &lt;&gt; 2.2 Install R and RStudio 2.3 Install ArcGIS Desktop or ArcGIS Pro 2.4 Install Tutorial Data To help analysts learn how to reproduce this analysis, the approach described in this technical report is structured as a tutorial available for optional download. Download tutorial data here. References "],
["prepare-hydraulic-data.html", "Chapter 3 Prepare Hydraulic Data 3.1 Import Adh Mesh Nodes 3.2 Create Mask 3.3 Set Environments 3.4 Convert Adh Mesh Nodes to Raster 3.5 Calculate Slope 3.6 Convert to .bil format", " Chapter 3 Prepare Hydraulic Data This chapter will describe the process used to prepare hydraulic modeling data for input to the Maxent model. For this study, the USACE developed Adaptive Hydraulics (AdH) 2D hydraulic model was used to model river dynamics. This chapter will describe how to process AdH outputs into usable datasets for mussel modeling. Figure 3.1: HREP Mussel Modeling Workflow, Hydraulic Predictors Step. 3.1 Import Adh Mesh Nodes The purpose of this step is convert the AdH mesh node output into a set of point feature classes. Create a new folder and geodatabase to represent the alternative that this AdH model represents. In this example we will be modeling the existing condition alternative: \\\\mvrdfs\\egis\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Adh\\Existing_condition/existingcondition.gdb Get the AdH output from the hydraulic engineer. Copy it to the alternative folder you created in the last step. EC-HH Working directory: \\\\mvr-netapp2\\MVRDATA\\ED\\ec-hh\\Mississippi_River\\Steamboat Island\\AdH\\Model Runs\\ Examine the AdH output file format and determine the steps required to convert it to .csv format. If the file contains header information other than field names (e.g., number of records, software version), delete those extraneous header rows so that only the row field names and data remain. If the file is tab or space-delimited, use Excel to convert the delimited text file to .csv. Open a blank Excel workbook and open the delimited text file. Use the import wizard to convert the tab or space-delimited file into an Excel workbook. Ensure the import works correctly and then save as a .csv file. Import the .csv file into the existingcondition geodatabase. Name the table by the flow condition it represents (Q5, Q95). Ensure that the field types are all set to double. Add the Q5 table into a blank ArcMap document. Right-click the Q5 table and click “Display XY Data”. Set appropriate ‘X’,‘Y’, and ‘Z’ fields. Identify the datum and coordinate system recorded in the AdH table; all future output feature classes and rasters will need to be in the same projected coordinate system. In this example, Datum: ‘NAD 1983 2011 US Feet’ and Coordinate System: ‘StatePlane Illinois West FIPS 1202’. Export Q5_Events as new point feature class named Q5_pts. Repeat the above steps to create point feature classes for the Q95 model results. 3.2 Create Mask The goal of this step is to define no data areas outside of the study. This step will use the UMRR Long Term Resource Monitoring (LTRM) Aquatic Areas dataset to create a mask of the study area. Create a new polygon feature class named: \\\\mvrdfs\\EGIS\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Data\\SB_Mussels.gdb\\SB_ILStatePlaneW\\study_area. Start an edit session on the study_area feature class and draw a polygon around the study area. Ensure that this polygon entirely covers the Q5_pts and Q95_pts. Use the Aquatic_Areas_2010 layer to prepare data for the Clip (Analysis) tool (\\\\mvrdfs\\egis\\Data\\Layers\\Biology\\Aquatic_Areas_2010.lyr). Input Features: Aquatic Areas 2010\\Classifications\\Aquatic Areas: Level 2 Clip Features: study_area Output Feature Class: \\\\mvrdfs\\EGIS\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Data\\SB_Mussels.gdb\\aquatic_areas Open an edit session to edit the aquatic_areas attribute table. Delete “Isolated Floodplain Lake” records from the aquatic_areas attribute table. Mussels are unlikely to be found in these areas. Select rows where ‘LAND_WATER’ field is set to Land, and delete. Use the merge tool on this feature class to ensure there is only one row representing Water. Use the Buffer (Analysis) tool to expand the study area beyond the extent of valid values. Use a buffer of approximately 20 meters to ensure that mussel samples fall well within the study area. Areas that fall outside the buffered area will be used to define no data in the AdH rasters. Input features: aquatic_areas_dissolve Output Feature Class: \\\\mvrdfs\\egis\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Data\\SB_Mussels.gdb\\SB_ILStatePlaneW\\aquatic_areas_20m Distance: 20 meters Use the Polygon to Raster (Conversion) tool to convert the aquatic_areas_20m feature class to a raster. Input Features: aquatic_areas_20m Value field: OBJECTID Output Raster Dataset: \\\\mvrdfs\\egis\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Adh\\Existing_condition\\existingcondition.gdb\\mask Set Environments Output Coordinates: NAD_1983_2011_StatePlane_Illinois_West_FIPS_1202_Ft_US Processing Extent: study_area Cell Size: 3 ft 3.3 Set Environments The purpose of this step is to set the Environments to mask so that all the subsequent AdH raster outputs will have the same coordinate system, extent, cell alignment, cell size, and no data area. *Set Environments * Ouput Coordinates: `mask` * Processing Extent: `mask` * Snap raster: `mask` * Cell Size: `mask` * Mask: `mask` 3.4 Convert Adh Mesh Nodes to Raster The goal of this step is to convert the raw Adaptive Hydraulics Model (AdH) data (depth, slope velocity, sheer stress, froude_number, Reynolds_number) into raster format that can be input to the Maxent model. AdH models will be produced for the Q5 (high flow) and Q95 (low flow) flow conditions. This will result in the creation of 12 rasters (one for each of 6 AdH parameter) by 2 flow conditions. Use the IDW (Spatial Analyst) tool to interpolate a raster surface. Input point features: Q5_pts. Z value field: velocity Output raster: \\\\mvrdfs\\EGIS\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Adh\\Existing_condition\\existingcondition.gdb\\q5_velocity Complete these steps for the other variables, depth, sheer stress, froude_number, and reynolds_number. 3.5 Calculate Slope The goal of the step is to calculate slope from the AdH depth variable created in the previous step. Use the Slope (Spatial Analyst) tool to calculate slope. Input raster: q5_depth Output raster: \\\\mvrdfs\\egis\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Adh\\Existing_condition\\existingcondition.gdb\\q5_slope Output measurement: degree Z factor = 1 (linear units same) Use Copy Raster (Data Management) tool to convert the q5_slope raster into .bil format, as outlined in previous step. Repeat the above steps to convert calculate the Q95 slope. 3.6 Convert to .bil format The goal of this step is to convert the AdH output into a format that can be used by Maxent. The .bil format is one of the formats common to both Maxent and ESRI. This step will repeated for all AdH (Q5, Q95) predictors. Use the Copy Raster (Data Management) tool to covert the AdH predictor rasters into .bil format. Input Raster: q5_velocity Output Raster Dataset: \\\\mvrdfs\\egis\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Adh\\Existing_condition\\q5_velocity.bil (Note: cannot save .bil format within the .gdb) Format: ESRI BIL Repeat the above step for all of the other environmental predictor variables. "],
["prepare-wind-and-wave-data.html", "Chapter 4 Prepare Wind and Wave Data 4.1 Identify Appropriate Weather Stations 4.2 Obtain Wind Data 4.3 Determine Period of Record", " Chapter 4 Prepare Wind and Wave Data This chapter will describe the process used to conduct a wind and wave model using the Upper Mississippi River Environmental Science Center (UMESC) Wind-Wave Model (Rohweder et al. 2012) to prepare hydraulic modeling data for input to the Maxent model. Figure 4.1: HREP Mussel Modeling Workflow, Wind-Wave Step. 4.1 Identify Appropriate Weather Stations 4.2 Obtain Wind Data 4.3 Determine Period of Record References "],
["create-backgound-data.html", "Chapter 5 Create Backgound Data 5.1 Create Background Data 5.2 Export to Maxent “SWD” Format", " Chapter 5 Create Backgound Data This chapter will describe the process used to calculate background data for input to the Maxent model. Background point data are used to define the habitat available to mussels within the study area. Figure 5.1: HREP Mussel Modeling Workflow, Calculate Background Step. 5.1 Create Background Data Create a background to constrain points to aquatic areas (more data resolution) and reduce Maxent run times. Use the Create Random Points (Data Management) tool to create a background restricted to aquatic areas: Output location: \\\\mvrdfs\\EGIS\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Data\\SB_Mussels.gdb\\ Output feature class: background Constraining feature class:aquatic_areas_20m Number of points: 10000 Minimum allowed distance: 25m Leave all others as defaults Click OK to run the tool In the background feature class, add 3 fields, one named species, Type = Text and Length=20; one named longitude, Type = Double; and one named latitude, Type = Double. For the species field use the Field Calculator tool to set the value of the field to species = “background”. Use the Calculate Geometry tool to populate the longitude and latitude fields, ensuring that the coordinate system is set to NAD 1983 2011 US Feet and StatePlane Illinois West FIPS 1202 and the units are set to US feet. 5.2 Export to Maxent “SWD” Format The purpose of this step is to assign the environmental predictor values (AdH hydraulic variables and optionally the wind/wave variables) to each of the background points. The Maxent documentation refers to this format as the “Samples With Data” (SWD) format because it contains the samples (i.e., sample identifier, latitude, longitude) with the environmental predictor variables (e.g., q5_velocity, q5_depth, q5_slope, etc.). Ensure all environmental predictor layers have the same spatial reference as the background feature class. Use the Extract Multi Values to Points (spatial analyst) tool to write new values (velocity, depth, slope, and ss) onto the background feature class. Input point features: \\\\mvrdfs\\EGIS\\Work\\EMP\\HREP_Projects\\SteamboatSlough\\Mussels\\SteamboatMusselModel\\Data\\SB_Mussels.gdb\\background Input rasters: q5_velocity, q5_depth, q5_ss, q5_froude, q5_reynolds, q5_slope, q95_velocity, q95_depth, q95_ss, q95_froude, q95_reynolds, q95_slope. Export the background feature class attribute table as a .csv file. Ensure the ObjectID field is deleted using Excel prior to use in Maxent. "],
["mussel-data-processing.html", "Chapter 6 Mussel Data Processing 6.1 Identify Mussel Surveys in Study Area 6.2 Import Sample Locations 6.3 Import Individual Mussel Records 6.4 Join Sample Location to Individual Mussel Records 6.5 Repeat for each mussel survey in the study area 6.6 Append Surveys together into a single Study Area feature class 6.7 Create a quantative table 6.8 Create MCAT Flag Fields 6.9 Create the samples table", " Chapter 6 Mussel Data Processing This chapter will describe the process used to prepare mussel occurrence data for input to the Maxent model. This analysis makes heavy use of the mussel surveys recorded in the USACE Mussel Database. Figure 6.1: HREP Mussel Modeling Workflow, Mussel Database Step. 6.1 Identify Mussel Surveys in Study Area The purpose of this step is to identify appropriate mussel surveys completed for the study area. &lt;&gt; 6.2 Import Sample Locations The purpose of this step is to import sample locations from the USACE Mussel Database. Working geodatabase: //mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW Import sample location point feature class for each survey. This feature class contains the feature geometry for each sampled location. Add double fields Northing and Easting and calculate geometry for each sample location point feature class. 6.3 Import Individual Mussel Records The purpose of this step is to import individual mussel records from the USACE mussel Database. Import “individual” data tables for each survey. This table contains records for individual mussels. Add double fields Northing and Easting to each mussel tabular data. Add a text field Method 6.4 Join Sample Location to Individual Mussel Records The purpose of this step is to join the individual mussel records to the sample locations. Join the sample location point feature class to each mussel tabular data. Directionality of join is important: right-click mussel tabular data and select join, using SAMPLEID as join field. Calculate geometry Northing and Easting from the sample location point feature class. Field calculate Method from the sample location point feature class using COLLECT_METHOD field (i.e., Method = COLLECT_METHOD). Remove the join. Use the “Display XY” tool to create events from the mussel tabular data. Export the events to the geodatabase as: Cordova_YEAR Create 2 new fields (type: long integer) titled NumberLive and NUM5YEAR. Use field calculator to populate each field with ‘0’ indicating absence and ‘1’ for presence in each new field (NumberLive and NUM5YEAR (number less than 5 years). 6.5 Repeat for each mussel survey in the study area The purpose of this step is to repeat the above three steps for each of the other mussel survey events within the study area. Repeat the previous three steps for each mussel survey. 6.6 Append Surveys together into a single Study Area feature class The purpose of this step is to assemble the “individual” data for each of the surveys within the study area that will be used in the study. Append all three datasets into one feature class in the .gdb called Cordova. Right-click this feature class and select ‘load’. &lt;&gt; 6.7 Create a quantative table The purpose of this step is to create the Cordova_all_individuals feature class using a definition query on the Cordova feature class to only select quantitative samples. Using the Cordova feature class, create a definition query where Method = ‘Quantitative’. Export the selected records from the Cordova feature class and name this new feature class Cordova_all_individuals. 6.8 Create MCAT Flag Fields The purpose of this step is to create a series of MCAT flag fields to indicate which individual mussel records meet each MCAT metrics. This flag field will be set in the next chapter. Create “flag” fields to indicate that mussel individuals fall into certain categories. Add the following fields (Type=long integer) to the Cordova_all_individuals attribute table: Listed, Tolerant, Lampsilini, Juveniles, Over_15yrs, tribe Use the Field Calculator tool on each of the fields that were created in the last step to set the value of all records to zero. 6.9 Create the samples table The purpose of this step is to create a feature class representing the sampled sites. Create a table of SampleID by tribe Pielou evenness score. Use the Dissolve tool: Input Features: Cordova_all_individuals Output feature class: samples Dissolve Fields: SampleID Statistics Fields: SUM_NumberLive, MEAN Create Multipart: unchecked "],
["calculate-mussel-metrics.html", "Chapter 7 Calculate Mussel Metrics 7.1 MCAT Metrics 7.2 Create Percent Listed 7.3 Create Percent Tolerant 7.4 Create Percent Tribe Lampsilini 7.5 Create Percent Juveniles 7.6 Create Percent Over 15 Years 7.7 Create Abundance 7.8 Create Species Evenness 7.9 Create Tribe Eveness 7.10 Create ES 100 7.11 MCAT Metric Site Level Thresholds 7.12 Calculate MCAT Site Score 7.13 Export to Maxent “SWD” format", " Chapter 7 Calculate Mussel Metrics This chapter will describe how to calculate metrics of habitat quality for each sampled site. Each of these metrics will be used as presence data as input to create a set of Maxent habitat suitability models. The metrics calculated in this section were taken from the Upper Mississippi River Mussel Community Assessment Tool (MCAT) (Dunn, Zigler, and Newton 2016). Figure 7.1: HREP Mussel Modeling Workflow, Calculate MCAT Metrics Step. 7.1 MCAT Metrics The purpose of this step is to describe the MCAT metrics used in this study. The following MCAT metrics were selected for inclusion in the model: percent listed species - Percent of listed threatened or endangered species (federal or bordering states) is a measure of sensitive species. percent tolerant - Percent of tolerant species (Amblema plicata, Quadrula quadrula, and Obliquaria reflexa) is a measure of a highly disturbed mussel assemblage (i.e., dominated by species tolerant of unstable substrates, silt accumulation, low current velocities, and fluctuating flow conditions). percent tribe Lampsilini - Percent of assemblage that falls within tribe Lampsilini is a measure of species composition, life history, and behavioral characteristics. percent juveniles - Percent of mussels &lt;= 5 years-old is a measure of recruitment into an assemblage over the past five years. percent &gt;= 15 yrs - Percent of mussels &gt;= 15 years-old is a measure of age distribution in an assemblage. abundance - A measure of abundance calculated as the density (no./\\(m^2\\)). species evenness - Species evenness represents the dominance of an assemblage by a few species using Pielou’s evenness index (range 0 to 1). tribe evenness - Tribe evenness represents the dominance of a particular taxonomic group using Pielou’s evenness index (range 0 to 1). ES_100 - The expected number of species with a sample size of 100 estimated by rarefaction is a measure of a healthy mussel assemblage. 7.2 Create Percent Listed The purpose of this step is to calculate the percent listed MCAT metric for each sampled site. Determine which mussels in the Cordova_all_individuals feature class are listed and set the flag field. Use the list below to select each of the following species and set the flag Listed field equal to one. UMR Listed Species Cumberlandia monodonta Elliptio crassidens Elliptio dilatata Ellipsaria lineolata Fusconia ebena Lampsilis higginsii Lampsilis teres teres Lampsilis teres anodontoides Ligumia recta Plethobasus cyphyus Potamilus capax Simpsonaias ambigua Create a definition query on the Cordova_all_individuals feature class where Listed = 1. Dissolve the Cordova_all_individuals feature class by SAMPLE_ID and ENAME (Scientific name). Add SUM_NumberLive and SUM_Listed fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it PercentListed. Open the PercentListed attribute table. Add a field titled Perc_listed Type = double. Use the Field Calculator tool to calculate the percent of individual listed species per sampled quadrat using the expression ([SUM_Listed] / [SUM_NumberLive]) * 100. 7.3 Create Percent Tolerant The purpose of this step is to calculate the percent tolerant MCAT metric for each sampled site. Determine which mussels in the Cordova_all_individuals feature class are considered tolerant and set the flag field. Use the list below to select each of the following species and set the flag Tolerant field equal to one. Tolerant Species Amblema plicata Obliquaria reflexa Quadrula quadrula Create a definition query on the Cordova_all_individuals feature class where Tolerant = 1. Dissolve the Cordova_all_individuals feature class by SAMPLE_ID and ENAME (Scientific name). Add SUM_NumberLive and SUM_Tolerant fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it PercentTolerant. Open the PercentTolerant attribute table. Add a field titled Perc_tolerant Type = double. Use the Field Calculator tool to calculate the percent of individual tolerant species per sampled quadrat using the expression ([SUM_Tolerant] / [SUM_NumberLive]) * 100. 7.4 Create Percent Tribe Lampsilini The purpose of this step is to calculate the percent tribe Lampsilini MCAT metric for each sampled site. Determine which mussels in the Cordova_all_individuals feature class are in the Lampsilini tribe and set the flag field. Use the list below to select each of the following species and set the flag Lampsilini field equal to one. Lampsilini Tribe Actinonaias ligamentina Ellipsaria lineolata Lampsilis cardium Lampsilis higginsii Lampsilis teres (teres) Leptodea fragilis Ligumia recta Obliquaria reflexa Obovaria olivaria Potamilus alatus Potamilus capax Potamilus ohiensis Toxolasma parvum Truncilla donaciformis Truncilla truncata Create a definition query on the Cordova_all_individuals feature class where Lampsilini = 1. Dissolve the Cordova_all_individuals feature class by SAMPLE_ID and ENAME (Scientific name). Add SUM_NumberLive and SUM_Tolerant fields in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it PercentLampsilini. Open the PercentLampsilini attribute table. Add a field titled perc_lampsilini Type = double. Use the Field Calculator tool to calculate the percent of individual tolerant species per sampled quadrat using the expression ([SUM_Tolerant] / [SUM_NumberLive]) * 100. 7.5 Create Percent Juveniles The purpose of this step is to calculate the percent juveniles MCAT metric for each sampled site. 7.6 Create Percent Over 15 Years The purpose of this step is to calculate the percent over 15 years old MCAT metric for each sampled site. 7.7 Create Abundance The purpose of this step is to calculate the Abundance MCAT metric for each sampled site. For the abundance metric, dissolve Cordova_all_individuals by SAMPLE_ID and ENAME (Scientific name). Add ‘SUM_NumberLive’ field in the Statistics section of the tool. Uncheck create multipart features. Set Output Feature Class to the working .gdb and name it Abundance. # Import Abundance from geodatabase abundance_sp &lt;- arc2sp(&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Abundance&quot;) # Convert sp object to a data frame abundance &lt;- abundance_sp@data # Remove OBJECTID field abundance &lt;- abundance[,-1] # Convert from num. of mussels per 0.25 sq m to num. per 1.0 square m abundance$num_sq_m &lt;- abundance$SUM_NumberLive * 4 # Calculate the quantiles q &lt;- quantile(abundance$num_sq_m) q ## 0% 25% 50% 75% 100% ## 4 4 8 20 180 # Merge the abundance scores back onto the sp object sample_abundance &lt;- sp::merge(x = abundance_sp, y = abundance, by.x = &quot;SampleID&quot;, by.y = &quot;SampleID&quot;) # Export to geodatabase sp2arc(sample_abundance, fc_path = &quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_abundance&quot;) 7.8 Create Species Evenness The purpose of this step is to calculate the Pielou’s evenness index (range 0-1), estimated at the species level for each sampled site. Create a table of SampleID by species by abundance (number live). Use the Dissolve tool: Input Features: Cordova_all_individuals Output feature class: Cordova_sampleid_species Dissolve Fields: SampleID, EName Statistics Fields: NumberLive, SUM Create Multipart: unchecked Ensure that the Cordova_sampleid_species feature class is of type Point Features and not Multipoint Features. If multipoint, then use the Multipart to Singlepart tool to convert from multipoint to point feature type. # Import ArcGIS feature class into R cordova_sampleid_species &lt;- arc2sp(&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Cordova_sampleid_species&quot;) # Convert sp object to a data frame sample_species &lt;- cordova_sampleid_species@data # Remove OBJECTID field sample_species &lt;- sample_species[,-1] # Convert to vegan community data matrix-like format using labdsv::matrify sample_species_matrix &lt;- labdsv::matrify(sample_species) # Calculate the Shannon-Weaver diversity index shannon_diversity &lt;- vegan::diversity(sample_species_matrix, index = &quot;shannon&quot;) # Calculate the number species per site (see ?vegan::diversity) species_number &lt;- vegan::specnumber(sample_species_matrix) # Use the following equation to calculate Pielou&#39;s evenness # See the vegan Diversity Vignette for details pielou_evenness &lt;- shannon_diversity/log(species_number) # Set NaN pielou_evenness values to zero pielou_evenness &lt;- ifelse(is.nan(pielou_evenness), 0, pielou_evenness) # Create a data frame of results pielou &lt;- data.frame(sampleid = names(pielou_evenness), shannon_diversity, species_number, pielou_evenness) # Merge the Pielou scores back onto the sp object sample_species_pielou &lt;- sp::merge(x = cordova_sampleid_species, y = pielou, by.x = &quot;SampleID&quot;, by.y = &quot;sampleid&quot;) # Export to geodatabase sp2arc(sample_species_pielou, fc_path = &quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_species_pielou&quot;) Create a table of SampleID by species Pielou evenness score. Use the Dissolve tool: Input Features: sample_species_pielou Output feature class: species_pielou Dissolve Fields: SampleID Statistics Fields: shannon_diversity, MEAN species_number, MEAN pielou_evenness, MEAN Create Multipart: unchecked 7.9 Create Tribe Eveness The purpose of this step is to calculate the Pielou’s evenness index (range 0-1), estimated at the tribe level. (will probably need to add a new column for tribe; dissolve on this with sample ID) In the feature class Cordova_all_individuals, create a new text variable named tribe. Use the Field Calculator tool on the tribe field to calculate its value using the following Python expression: !Ename!.split()[0] Create a table of SampleID by tribe by abundance (number live). Use the Dissolve tool: Input Features: Cordova_all_individuals Output feature class: Cordova_sampleid_tribe Dissolve Fields: SampleID, tribe Statistics Fields: NumberLive, SUM Create Multipart: unchecked # Import ArcGIS feature class into R cordova_sampleid_tribe &lt;- arc2sp(&quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/Cordova_sampleid_tribe&quot;) # Convert sp object to a data frame sample_tribe &lt;- cordova_sampleid_tribe@data # Remove OBJECTID field sample_tribe &lt;- sample_tribe[,-1] # Convert to vegan community data matrix-like format using labdsv::matrify sample_tribe_matrix &lt;- labdsv::matrify(sample_tribe) # Calculate the Shannon-Weaver diversity index tribe_shannon_diversity &lt;- vegan::diversity(sample_tribe_matrix, index = &quot;shannon&quot;) # Calculate the number species per site (see ?vegan::diversity) tribe_number &lt;- vegan::specnumber(sample_tribe_matrix) # Use the following equation to calculate Pielou&#39;s evenness # See the vegan Diversity Vignette for details tribe_pielou_evenness &lt;- tribe_shannon_diversity/log(tribe_number) # Set NaN pielou_evenness values to zero tribe_pielou_evenness &lt;- ifelse(is.nan(tribe_pielou_evenness), 0, tribe_pielou_evenness) # Create a data frame of results tribe_pielou &lt;- data.frame(sampleid = names(tribe_pielou_evenness), tribe_shannon_diversity, tribe_number, tribe_pielou_evenness) # Merge the Pielou scores back onto the sp object sample_tribe_pielou &lt;- sp::merge(x = cordova_sampleid_tribe, y = tribe_pielou, by.x = &quot;SampleID&quot;, by.y = &quot;sampleid&quot;) # Export to geodatabase sp2arc(sample_tribe_pielou, fc_path = &quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/sample_tribe_pielou&quot;) Create a table of SampleID by tribe Pielou evenness score. Use the Dissolve tool: Input Features: sample_tribe_pielou Output feature class: tribe_pielou Dissolve Fields: SampleID Statistics Fields: tribe_shannon_diversity, MEAN tribe_number, MEAN tribe_pielou_evenness, MEAN Create Multipart: unchecked 7.10 Create ES 100 The purpose of this step is to calculate the ES 100 MCAT metric for each sampled site. ES_100 is the expected number of species with a sample size of 100 estimated by rarefaction based on random resampling of the data (Dunn, Zigler, and Newton 2016). ES_100-species richness estimated by rarefaction; caveat: sites need to be compared based on an equal sample size because # of species and # of individuals sampled are large correlated. Not sure how best to approach this one; I defer to you! # Uses the sample_species_matrix calculated from the species evenness section # Calculate rarefaction using a sample size of 100 rarefy_es_100 &lt;- vegan::rarefy(x = sample_species_matrix, sample = 100) ## Warning in vegan::rarefy(x = sample_species_matrix, sample = 100): ## requested &#39;sample&#39; was larger than smallest site maximum (0) # Calculate rarefaction using a reasonable sample size rarefy_rowmedian &lt;- vegan::rarefy(x = sample_species_matrix, sample = median(rowSums(sample_species_matrix))) ## Warning in vegan::rarefy(x = sample_species_matrix, sample = ## median(rowSums(sample_species_matrix))): requested &#39;sample&#39; was larger than ## smallest site maximum (0) # Create a data frame of results rarefy_species &lt;- data.frame(sampleid = names(rarefy_es_100), rarefy_es_100, rarefy_rowmedian, shannon = diversity(sample_species_matrix), specnumber = specnumber(sample_species_matrix)) # Merge the rarefaction scores back onto the sp object rarefy_sampleid_species &lt;- sp::merge(x = cordova_sampleid_species, y = rarefy_species, by.x = &quot;SampleID&quot;, by.y = &quot;sampleid&quot;) # Export to geodatabase sp2arc(rarefy_sampleid_species, fc_path = &quot;//mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/rarefy_sampleid_species&quot;) Create a table of SampleID by tribe Pielou evenness score. Use the Dissolve tool: Input Features: rarefy_sampleid_species Output feature class: rarefy_samples Dissolve Fields: SampleID Statistics Fields: SUM_NumberLive, MEAN rarefy_es_100, MEAN rarefy_rowmedian, MEAN shannon, MEAN specnumber, MEAN Create Multipart: unchecked 7.11 MCAT Metric Site Level Thresholds The descriptive statistics presented in the previous section were used to select MCAT metrics thresholds. Table 7.1: Translating MCAT Metric Thresholds from the Bed to the Site Scale. Bed Scale Site Scale Metrics Poor Fair Good Site Threshold No. of Sites % listed &lt;0.6 0.6-3.6 &gt;3.6 &gt;3 34 % tolerant &gt;62.7 38.3-62.7 &lt;38.3 &lt;40 72 % lampsilini &lt;17.2 or &gt;56.4 &lt;17.2-34.7 or &gt;39.5-56.4 &gt;34.7-39.5 &gt;40 93 % juveniles &lt;19.8 &lt;19.8-49.3 &gt;49.3 &gt;50 72 % &gt;= 15 years &lt;0.8 or &gt;16.0 &gt;5.6-16.0 &gt;2.4-5.6 &gt;5* 13 abundance &lt;8 8-13 &gt;13 &gt;13 62 species evenness &lt;0.665 0.665-0.780 &gt;0.780 &gt;0.7 98 tribe evenness &lt;0.719 0.719-0.823 &gt;0.823 &gt;0.8 86 ES 100 &lt;11.5 11.5-15.7 &gt;15.7 &gt;3* 49 * The site threshold for this metric is lower than the bed threshold due to the lower number of individuals of each species found at each sampled site. 7.12 Calculate MCAT Site Score The purpose of this section is to calculate an MCAT Site score. This score is composed of the number of MCAT metrics met for each site. A site that meets none of the MCAT metrics receives a score of zero while a site that meets all of the scores receives a score of nine. Figure 7.2: Frequency of MCAT Site Scores. 7.13 Export to Maxent “SWD” format The purpose of this step is to assign the ADH predictor variables (and optionally the wind/wave variables) to each MCAT metric. The Maxent documentation refers to this format as the “Samples With Data” (SWD) format because it contains the samples (i.e., sample identifier, latitude, longitude) with the environmental predictor variables (e.g., q5_velocity, q5_depth, q5_slope, etc.). Add 3 fields titled ‘species’ Type=string and Length=20; ‘longitude’ Type=double; and ‘latitude’ Type=double; in that order. Use field calculator to populate the field with species=“perc_listed”. Use Calculate Geometry to populate the ‘longitude’ and ‘latitude’ fields, ensuring that the coordinate system is set to ‘NAD 1983 2011 US Feet’ and ‘StatePlane Illinois West FIPS 1202’ and the units are set to US feet. Use Extract Multi Values to Points (spatial analyst) tool to write new values (velocity, depth, slope, and ss) onto each MCAT metric feature class and background. Input point features: //mvrdfs/EGIS/Work/EMP/HREP_Projects/SteamboatSlough/Mussels/SteamboatMusselModel/Data/SB_Mussels.gdb/SB_ILStatePlaneW/PercentListed Input rasters: velocity, depth, slope, and ss (use rasters in the Adh.gdb, not .bil) copy unionidae_swd and delete 3 variable fields. Repeat this process for PercentTolerant, PercentLampsilini, PercentJuvenile, PercentOver15yrs, Abundance, species_pielou, tribe_pielou, rarefy_samples, and background. Ensure all layers have same spatial reference before running the tool. Export background and each mussel MCAT metric as .csv files. Ensure ObjectID field is deleted in Excel prior to upload in Maxent. References "],
["explore-mcat-metrics.html", "Chapter 8 Explore MCAT Metrics 8.1 MCAT Metric Site Threshold 8.2 MCAT Site Scores 8.3 MCAT Site Score by Velocity 8.4 MCAT Site Score by Shear Stress 8.5 MCAT Site Score by Reynolds Number 8.6 MCAT Site Score by Froude Number 8.7 MCAT Site Score by Depth 8.8 MCAT Site Score by Slope", " Chapter 8 Explore MCAT Metrics This chapter will explore the MCAT metrics to determine if relationships exist between predictor variables and MCAT metrics. 8.1 MCAT Metric Site Threshold The purpose of this section is to display the range of calculated values for each of the MCAT metrics for each of the sites in the Steamboat Island study area. The MCAT report is clear about metric thresholds to use for evaluating quality mussel beds. However, this study is using the individual site unit of analysis. Therefore, decisions must be made on what is the appropriate metric threshold to use for the site level of analysis. The descriptive statistics in this section will help to inform that decision. 8.1.1 Percent Listed 8.1.2 Percent Tolerant 8.1.3 Percent Tribe Lampsilini 8.1.4 Percent Juveniles 8.1.5 Percent over 15 years 8.1.6 Abundance 8.1.7 Species Evenness 8.1.8 Tribe Evenness 8.1.9 ES_100 8.2 MCAT Site Scores The purpose of this step is to explore relationships between the MCAT Site Score and the hydraulic environmental predictors. Figure 8.1: MCAT Site Scores with Velocity. 8.3 MCAT Site Score by Velocity 8.4 MCAT Site Score by Shear Stress 8.5 MCAT Site Score by Reynolds Number 8.6 MCAT Site Score by Froude Number 8.7 MCAT Site Score by Depth 8.8 MCAT Site Score by Slope "],
["develop-maxent-mussel-model.html", "Chapter 9 Develop Maxent Mussel Model 9.1 Download the Maxent Software 9.2 Convert predictors from .bil to .mxe format 9.3 Run Maxent 9.4 Convert model output from .mxe back to bil format 9.5 Maxent speed Issues", " Chapter 9 Develop Maxent Mussel Model This chapter will describe the process used to configure and run the Maxent model (Phillips et al. 2017). Figure 9.1: HREP Mussel Modeling Workflow, Run Maxent Step. 9.1 Download the Maxent Software The purpose of this section is to describe the process for downloading and configuring the Maxent software. &lt;&gt; 9.2 Convert predictors from .bil to .mxe format The purpose of this step is to describe how to convert a raster format that ESRI products can read to a raster format the Maxent can read and write efficiently. To speed model creation (from 10’s of hours to 10’s of minutes), convert the predictors from the .bil format to the Maxent .mxe format. Open command prompt and change to the working directory. Change to the correct drive if necessary by typing c:. Then used cd C:\\Users\\b6pdpdem\\Documents\\SteamboatMusselModel to change to your local working directory. In the working directory, create an input_bil folder. Copy the .bil format predictor rasters created in previous chapters into this folder. In the working directory, create an input_mxe folder. java -Xmx5g -cp maxent.jar density.Convert C:\\Users\\b6pdpdem\\Documents\\SteamboatMusselModel\\input_bil bil C:\\Users\\b6pdpdem\\Documents\\SteamboatMusselModel\\input_mxe mxe 9.3 Run Maxent The purpose of this section is to describe the process of configuring the Maxent model. &lt;&gt; 9.4 Convert model output from .mxe back to bil format The purpose of this step is to describe how to convert a raster in the Maxent .mxe format back to the .bil format that can be read by ESRI. java -Xmx5g -cp maxent.jar density.Convert C:\\Users\\b6pdpdem\\Documents\\SteamboatMusselModel\\sb_existing_20181203_2 mxe C:\\Users\\b6pdpdem\\Documents\\SteamboatMusselModel\\sb_existing_20181203_2 bil Use the Define Projection tool to set the projection of the .bil rasters. 9.5 Maxent speed Issues Follow these simple performance guidelines to reduce Maxent run time from a week to half an hour. Run the model on a physical computer, not on a virtual machine. Select a computer with the fastest processor and most memory available. Increase the memory available to the java virtual machine (JVM). Edit the first line of the maxent.bat file to something like the following: java -Xmx5g -jar maxent.jar, where the -Xmx parameter sets the maximum heap size for the JVM. Set it to something less than the total amount of physical memory on your computer. Do not run the model across the LAN (inputs and outputs stored on a network file system). Copy all inputs and write all outputs to the local file system. Use a solid state drive for storing inputs and outputs. Use the “SWD” format for specifying both samples (species occurrences) and environmental layers (background points). Convert all predictor grids to the Maxent .mxe format. Write all outputs to the Maxent .mxe format. Set the threads parameter to at least the number of cores on your computer (or a large percentage of logical processors) to speed processing of replicates. References "],
["evaulate-model.html", "Chapter 10 Evaulate Model 10.1 Goodness of Fit", " Chapter 10 Evaulate Model This chapter will describe how to evaluate how well the existing condition model fits the mussel data for the study area. Figure 10.1: HREP Mussel Modeling Workflow, Evaluate Model Step. 10.1 Goodness of Fit The goodness of fit of the existing condition model results can be determined using the Area Under the Curve (AUC) of the Receiver Operating Characteristic (ROC). Figure 10.2: Existing Condition Model Receiver Operating Characteristic Curve. "],
["evaluate-alternatives.html", "Chapter 11 Evaluate Alternatives 11.1 Island Head Alternative", " Chapter 11 Evaluate Alternatives This chapter will desribe the process for evaluating project alternatives. 11.1 Island Head Alternative island head model results "]
]
